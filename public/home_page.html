<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>EventHive - Where Moments Become Memories</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        <link rel="stylesheet" href="home_page.css" />
        <link rel="icon" type="image/png" href="Logo.png">
    </head>
    <body>
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
            <!--  All the logos from sidebar              -->
                <div class="logo-icon">
                    <img src="Logo.png" alt="EventHive Logo" class="logo-img">
                </div>
                <h1>EventHive</h1>
            </div>
            <div class="nav-menu">
                <a href="home_page.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span class="nav-text">Home</span>
                </a>
                <a href="login.html" class="nav-item">
                    <i class="fas fa-ticket-alt"></i>
                    <span class="nav-text">My Tickets</span>
                </a>
                <a href="login.html" class="nav-item">
                    <i class="fas fa-user"></i>
                    <span class="nav-text">Account</span>
                </a>
                <a href="login.html" class="nav-item">
                    <i class="fas fa-sign-in-alt"></i>
                    <span class="nav-text">Login</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header Section -->
            <section class="header">
                <h2>Moto Moto likes disco</h2>
                <p>Discover unforgettable experiences, connect with your passions, and collect moments that last a lifetime. Your next adventure starts here.</p>
                <a href="#current-events" class="btn">Explore Events</a>
            </section>

            <div class="events-container" id="eventsContainer">
                <!-- Events will be loaded here -->
            </div>

            <!-- Why Choose Us -->
            <section class="features">
                <h2 class="section-title" style="color: white;">Why Choose EventHive?</h2>
                <div class="features-container">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3>Instant Access</h3>
                        <p>Get your tickets immediately after purchase with our digital delivery system.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Secure Booking</h3>
                        <p>Your transactions are protected with industry-leading security measures.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Curated Selection</h3>
                        <p>We handpick events to ensure quality experiences for our community.</p>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer>
                <div class="footer-links">
                    <a href="#">About Us</a>
                    <a href="#">Contact</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Privacy Policy</a>
                    <a href="#">Careers</a>
                </div>

                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>

                <p>&copy; 2025 EventHive. All rights reserved. "Where Moments Become Memories"</p>
            </footer>
        </div>

        <!-- Javascript -->
        <script>
            const sidebar = document.getElementById('sidebar');
            let hoverTimer;

            // Add hover behavior
            sidebar.addEventListener('mouseenter', () => {
                hoverTimer = setTimeout(() => {
                    sidebar.classList.add('expanded');
                }, 100); // 100ms delay for smoother UX
            });

            sidebar.addEventListener('mouseleave', () => {
                clearTimeout(hoverTimer);
                sidebar.classList.remove('expanded');
            });

        </script>
        <script>
            // Load events from the server and display them
            async function loadEvents() {
                try {
                    const res = await fetch('/events');
                    const events = await res.json();

                    const container = document.getElementById('eventsContainer');
                    container.innerHTML = '';

                    events.forEach(event => {
                        const card = document.createElement('div');
                        card.classList.add('event-card');

                        card.innerHTML = `
                            <div class="event-image" style="background-image: url('${event.picture_url || 'fallback.jpg'}');"></div>
                            <div class="event-details">
                                <h3>${event.name}</h3>
                                <div class="event-meta">
                                    <p><i class="fas fa-map-marker-alt"></i> ${event.address}</p>
                                    <p><i class="fas fa-calendar-alt"></i> ${new Date(event.date).toLocaleDateString('en-GB')} at ${event.time.substring(0,5)}</p>
                                    <p><i class="fas fa-user-tag"></i> Age requirements: ${event.age_requirement}</p>
                                    <p><i class="fas fa-users"></i> ${event.artist || 'TBA'}</p>
                                    <p><i class="fas fa-palette"></i> Theme: ${event.theme || 'General'}</p>
                                    <p><i class="fas fa-ticket-alt"></i> Tickets Available: ${event.nr_of_tickets}</p>
                                </div>
                                <a href="login.html" class="btn">Get Tickets</a>
                            </div>
                        `;

                        container.appendChild(card);
                    });
                } catch (err) {
                    console.error('Error loading events:', err);
                }
            }

            function formatDateTime(date, time) {
                try {
                    if (!date) return 'Date TBD';
                    const dateObj = new Date(date);
                    if (time) {
                        const [hours, minutes] = time.split(':');
                        dateObj.setHours(+hours);
                        dateObj.setMinutes(+minutes);
                    }

                    return dateObj.toLocaleString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: true
                    });
                } catch {
                    return 'Invalid date';
                }
            }
            window.addEventListener('DOMContentLoaded', loadEvents);
        </script>

    </body>
</html>